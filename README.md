Инструкция: mu-plugin "Archive Post Status"

Назначение
Добавление кастомного статуса записей "Archived" с быстрым переключением из админки

Функциональность

1. Регистрация статуса "Archived"
Создает новый статус archive
Записи не публичные, исключены из поиска
Отображается в списках админки

2. Кнопки быстрого действия
"Send to Archive" - для обычных записей
"Restore" - для архивных записей (возврат в черновики)
В строке действий списка записей

3. Безопасность
Проверка прав edit_others_posts
Валидация параметров запроса

4. Интеграция с кэшированием
Очистка кэша WordPress
Интеграция с SpinupWP
Поддержка Cloudflare через хук
Техническая реализация

Хуки:
init - регистрация статуса
post_row_actions - добавление кнопок
admin_init - обработка переключения статуса
cloudflare_purge_url_actions - интеграция с Cloudflare

Методы класса:
register_post_status_archive() - регистрация статуса
button_send_post_to_archive() - кнопки в интерфейсе
update_post_status() - обработка смены статуса
purge_cloudflare_url() - очистка кэша Cloudflare

Результат

Для администраторов:
Быстрое архивирование записей в один клик
Восстановление архивных записей
Отдельный статус для скрытого контента

Для сайта:
Архивные записи не видны на фронтенде
Автоматическая очистка кэша при изменении статуса
Оптимизация производительности

Итог: Удобный инструмент для управления жизненным циклом контента с поддержкой современных систем кэширования
